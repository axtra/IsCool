CREATE TABLE emdi_administracion (adm_id INT UNIQUE AUTO_INCREMENT, adm_login VARCHAR(45) NOT NULL, adm_passwd VARCHAR(15) NOT NULL, adm_habilitar_nota1 TINYINT(1), adm_habilitar_nota2 TINYINT(1), adm_habilitar_nota3 TINYINT(1), adm_habilitar_nota4 TINYINT(1), adm_habilitar_nota5 TINYINT(1), adm_habilitar_nota6 TINYINT(1), adm_habilitar_nota7 TINYINT(1), adm_habilitar_nota8 TINYINT(1), adm_habilitar_nota9 TINYINT(1), adm_habilitar_nota10 TINYINT(1), adm_habilitar_nota11 TINYINT(1), adm_habilitar_nota12 TINYINT(1), created_at DATETIME, updated_at DATETIME, PRIMARY KEY(adm_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_spanish_ci ENGINE = InnoDB;
CREATE TABLE emdi_estudiante (est_id INT UNIQUE AUTO_INCREMENT, est_nombres VARCHAR(60) NOT NULL, est_apellidos VARCHAR(60) NOT NULL, est_cedula VARCHAR(10), est_fecha_nacimiento DATE, est_email_estudiante VARCHAR(100), est_house VARCHAR(15) NOT NULL, est_nombre_representante VARCHAR(120) NOT NULL, est_telf_repr_casa VARCHAR(10), est_telf_repr_trabajo VARCHAR(45), est_telf_repr_celular VARCHAR(10), est_email_representante VARCHAR(60), est_login_representante VARCHAR(60) NOT NULL, est_pass_representante VARCHAR(10) NOT NULL, created_at DATETIME, updated_at DATETIME, gra_id INT NOT NULL, INDEX gra_id_idx (gra_id), PRIMARY KEY(est_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_spanish_ci ENGINE = InnoDB;
CREATE TABLE emdi_grado (gra_id INT UNIQUE AUTO_INCREMENT, gra_nombre VARCHAR(40) NOT NULL, gra_nombre_corto VARCHAR(5), pro_id INT NOT NULL, INDEX pro_id_idx (pro_id), PRIMARY KEY(gra_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_spanish_ci ENGINE = InnoDB;
CREATE TABLE emdi_materia (mat_id INT UNIQUE AUTO_INCREMENT, mat_nombre VARCHAR(60) NOT NULL, PRIMARY KEY(mat_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_spanish_ci ENGINE = InnoDB;
CREATE TABLE emdi_materia_x_grado (mxg_id INT AUTO_INCREMENT, gra_id INT NOT NULL, mat_id INT NOT NULL, pro_id INT NOT NULL, INDEX gra_id_idx (gra_id), INDEX mat_id_idx (mat_id), INDEX pro_id_idx (pro_id), PRIMARY KEY(mxg_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_spanish_ci ENGINE = InnoDB;
CREATE TABLE emdi_nota (not_id INT UNIQUE AUTO_INCREMENT, not_codigo_parcial VARCHAR(4) NOT NULL, not_nota INT NOT NULL, mat_id INT NOT NULL, pro_id INT NOT NULL, est_id INT NOT NULL, created_at DATETIME, updated_at DATETIME, INDEX mat_id_idx (mat_id), INDEX est_id_idx (est_id), PRIMARY KEY(not_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_spanish_ci ENGINE = InnoDB;
CREATE TABLE emdi_profesor (pro_id INT UNIQUE AUTO_INCREMENT, pro_nombres VARCHAR(60) NOT NULL, pro_apellidos VARCHAR(60) NOT NULL, pro_email VARCHAR(100), pro_telf_casa VARCHAR(45), pro_telf_celular VARCHAR(45), pro_login VARCHAR(60), pro_cedula VARCHAR(10), pro_fecha_nacimiento DATE, pro_house VARCHAR(15), PRIMARY KEY(pro_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_spanish_ci ENGINE = InnoDB;
CREATE TABLE emdi_profesor_x_grado (pxg_id INT AUTO_INCREMENT, pro_id INT NOT NULL, gra_id INT NOT NULL, INDEX pro_id_idx (pro_id), INDEX gra_id_idx (gra_id), PRIMARY KEY(pxg_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_spanish_ci ENGINE = InnoDB;
ALTER TABLE emdi_estudiante ADD CONSTRAINT emdi_estudiante_gra_id_emdi_grado_gra_id FOREIGN KEY (gra_id) REFERENCES emdi_grado(gra_id);
ALTER TABLE emdi_grado ADD CONSTRAINT emdi_grado_pro_id_emdi_profesor_pro_id FOREIGN KEY (pro_id) REFERENCES emdi_profesor(pro_id);
ALTER TABLE emdi_materia_x_grado ADD CONSTRAINT emdi_materia_x_grado_pro_id_emdi_profesor_pro_id FOREIGN KEY (pro_id) REFERENCES emdi_profesor(pro_id);
ALTER TABLE emdi_materia_x_grado ADD CONSTRAINT emdi_materia_x_grado_mat_id_emdi_materia_mat_id FOREIGN KEY (mat_id) REFERENCES emdi_materia(mat_id);
ALTER TABLE emdi_materia_x_grado ADD CONSTRAINT emdi_materia_x_grado_gra_id_emdi_grado_gra_id FOREIGN KEY (gra_id) REFERENCES emdi_grado(gra_id);
ALTER TABLE emdi_nota ADD CONSTRAINT emdi_nota_mat_id_emdi_materia_mat_id FOREIGN KEY (mat_id) REFERENCES emdi_materia(mat_id);
ALTER TABLE emdi_nota ADD CONSTRAINT emdi_nota_est_id_emdi_estudiante_est_id FOREIGN KEY (est_id) REFERENCES emdi_estudiante(est_id);
ALTER TABLE emdi_profesor_x_grado ADD CONSTRAINT emdi_profesor_x_grado_pro_id_emdi_profesor_pro_id FOREIGN KEY (pro_id) REFERENCES emdi_profesor(pro_id);
ALTER TABLE emdi_profesor_x_grado ADD CONSTRAINT emdi_profesor_x_grado_gra_id_emdi_grado_gra_id FOREIGN KEY (gra_id) REFERENCES emdi_grado(gra_id);
